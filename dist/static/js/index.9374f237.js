(()=>{"use strict";var e,s,l,a,i={271:function(e,s,l){var a=l(848),i=l(540),t=l(338);let n=e=>{let{onReset:s}=e;return(0,a.jsx)("header",{className:"app-header",children:(0,a.jsxs)("div",{className:"header-container",children:[(0,a.jsxs)("div",{className:"header-brand",children:[(0,a.jsx)("img",{src:"/header_logo.png",alt:"Dragon's Dogma 2",className:"header-logo"}),(0,a.jsx)("h1",{className:"header-title",children:"Quest Tracker"})]}),s&&(0,a.jsx)("button",{className:"dd2-button header-reset",onClick:s,title:"Сбросить весь прогресс",children:"Сброс прогресса"})]})})},r={main:"/main_quest_icon.png",side:"/side_quest.png",romance:"/rose_icon.png",gold:"/treasure_icon.png",xp:"/potion_icon.png",item:"/glass_ball_icon.png",vermund:"/home_icon.png",battahl:"/gate_icon.png",volcanic:"/cave_icon.png",unmoored:"/way_point_icon.png",required:"/scar_icon.png",missable:"/exit_icon.png",critical:"/warrior_icon.png",info:"/notes_icon.png",target:"/way_point_icon.png",unlock:"/gate_icon.png",note:"/notes_icon.png",link:"/fast_travel_icon.png",level:"/level_1_icon.png"},c={main:"Основной квест",side:"Побочный квест",romance:"Романтический квест",gold:"Золото",xp:"Опыт",item:"Предмет",vermund:"Vermund",battahl:"Battahl",volcanic:"Volcanic Island",unmoored:"Unmoored World",required:"Обязательный",missable:"Провальный",critical:"Критический",info:"Информация",target:"Цель",unlock:"Открывает",note:"Заметка",link:"Ссылка",level:"Уровень"},d=e=>{let{type:s,size:l="medium",className:i=""}=e;return(0,a.jsx)("img",{src:r[s],alt:c[s],className:`quest-icon quest-icon-${l} ${i}`,title:c[s]})},o=e=>{let{progress:s}=e;return(0,a.jsx)("div",{className:"quest-progress",children:(0,a.jsx)("div",{className:"quest-progress-container",children:(0,a.jsxs)("div",{className:"progress-stats-inline",children:[(0,a.jsxs)("div",{className:"progress-stat-item progress-stat-total",children:[(0,a.jsx)("span",{className:"progress-label",children:"Всего:"}),(0,a.jsxs)("span",{className:"progress-value",children:[(0,a.jsx)("span",{className:"progress-completed",children:s.total.completed}),(0,a.jsx)("span",{className:"progress-separator",children:"/"}),(0,a.jsx)("span",{className:"progress-total",children:s.total.total})]}),(0,a.jsxs)("span",{className:"progress-percent",children:["(",s.total.percentage,"%)"]})]}),(0,a.jsx)("div",{className:"progress-divider",children:"•"}),(0,a.jsxs)("div",{className:"progress-stat-item",children:[(0,a.jsx)("span",{className:"progress-label",children:"Основные:"}),(0,a.jsxs)("span",{className:"progress-value",children:[s.main.completed,"/",s.main.total]})]}),(0,a.jsx)("div",{className:"progress-divider",children:"•"}),(0,a.jsxs)("div",{className:"progress-stat-item",children:[(0,a.jsx)("span",{className:"progress-label",children:"Побочные:"}),(0,a.jsxs)("span",{className:"progress-value",children:[s.side.completed,"/",s.side.total]})]}),(0,a.jsx)("div",{className:"progress-divider",children:"•"}),(0,a.jsxs)("div",{className:"progress-stat-item",children:[(0,a.jsxs)("span",{className:"progress-label",children:[(0,a.jsx)(d,{type:"vermund",size:"small"})," Королевство Вермунд:"]}),(0,a.jsxs)("span",{className:"progress-value",children:[s.vermund.completed,"/",s.vermund.total]})]}),(0,a.jsx)("div",{className:"progress-divider",children:"•"}),(0,a.jsxs)("div",{className:"progress-stat-item",children:[(0,a.jsxs)("span",{className:"progress-label",children:[(0,a.jsx)(d,{type:"battahl",size:"small"})," Королевство Батталь:"]}),(0,a.jsxs)("span",{className:"progress-value",children:[s.battahl.completed,"/",s.battahl.total]})]}),(0,a.jsx)("div",{className:"progress-divider",children:"•"}),(0,a.jsxs)("div",{className:"progress-stat-item",children:[(0,a.jsxs)("span",{className:"progress-label",children:[(0,a.jsx)(d,{type:"volcanic",size:"small"})," Вулканический остров:"]}),(0,a.jsxs)("span",{className:"progress-value",children:[s.volcanic.completed,"/",s.volcanic.total]})]}),(0,a.jsx)("div",{className:"progress-divider",children:"•"}),(0,a.jsxs)("div",{className:"progress-stat-item",children:[(0,a.jsxs)("span",{className:"progress-label",children:[(0,a.jsx)(d,{type:"unmoored",size:"small"})," Изнанка мира:"]}),(0,a.jsxs)("span",{className:"progress-value",children:[s.unmoored.completed,"/",s.unmoored.total]})]})]})})})},m=e=>{let{quest:s,isCompleted:l,isFailed:i,isSelected:t,onToggle:n,onMarkFailed:r,onSelect:c}=e,o=i?"quest-list-item-failed":l?"quest-list-item-completed":"";return(0,a.jsx)("div",{className:`quest-list-item ${o} ${t?"quest-list-item-selected":""}`,onClick:()=>c(s.id),children:(0,a.jsxs)("div",{className:"quest-item-content",children:[(0,a.jsxs)("div",{className:"quest-item-header",children:[(0,a.jsxs)("div",{className:"quest-item-title-row",children:[s.flags.isRomance?(0,a.jsx)(d,{type:"romance",size:"medium",className:"quest-item-icon"}):(0,a.jsx)(d,{type:s.type,size:"medium",className:"quest-item-icon"}),(0,a.jsxs)("div",{className:"quest-item-titles",children:[(0,a.jsx)("h3",{className:"quest-item-name",children:s.nameRu}),(0,a.jsx)("p",{className:"quest-item-name-ru",children:s.name})]})]}),(0,a.jsxs)("div",{className:"quest-item-controls",children:[(0,a.jsx)("button",{className:`quest-control-btn quest-control-complete ${l?"quest-control-active":""}`,onClick:e=>{e.stopPropagation(),i||n(s.id)},disabled:i,title:l?"Отменить выполнение":"Отметить выполненным",children:"✓"}),(0,a.jsx)("button",{className:`quest-control-btn quest-control-fail ${i?"quest-control-active":""}`,onClick:e=>{e.stopPropagation(),r(s.id)},title:i?"Отменить провал":"Отметить проваленным",children:"✗"})]})]}),(0,a.jsxs)("div",{className:"quest-item-location-info",children:[(0,a.jsxs)("span",{className:"quest-item-location",children:["Королевство Вермунд"===s.location&&(0,a.jsx)(d,{type:"vermund",size:"small"}),"Королевство Батталь"===s.location&&(0,a.jsx)(d,{type:"battahl",size:"small"}),"Вулканический остров"===s.location&&(0,a.jsx)(d,{type:"volcanic",size:"small"}),"Изнанка мира"===s.location&&(0,a.jsx)(d,{type:"unmoored",size:"small"}),s.location]}),s.subLocation&&(0,a.jsxs)("span",{className:"quest-item-sublocation",children:["→ ",s.subLocation]})]}),(0,a.jsx)("p",{className:"quest-item-description",children:s.description}),(0,a.jsxs)("div",{className:"quest-item-flags",children:[s.flags.isRequired&&(0,a.jsxs)("span",{className:"dd2-badge dd2-badge-red",title:"Обязателен для других квестов",children:[(0,a.jsx)(d,{type:"required",size:"small"}),"Обязательный"]}),s.flags.isRomance&&(0,a.jsxs)("span",{className:"dd2-badge quest-romance-badge",title:"Романтический квест",children:[(0,a.jsx)(d,{type:"romance",size:"small"}),"Романтический"]}),s.flags.isMissable&&(0,a.jsxs)("span",{className:"dd2-badge dd2-badge-red",title:"Можно пропустить навсегда",children:[(0,a.jsx)(d,{type:"missable",size:"small"}),"Провальный"]}),s.flags.isCritical&&(0,a.jsxs)("span",{className:"dd2-badge dd2-badge-gold",title:"Критичен для прохождения",children:[(0,a.jsx)(d,{type:"critical",size:"small"}),"Критический"]}),i&&(0,a.jsxs)("span",{className:"dd2-badge quest-item-failed-badge",children:[(0,a.jsx)(d,{type:"missable",size:"small"}),"Провален"]})]})]})})},u=e=>{let{quests:s,isQuestCompleted:l,isQuestFailed:t,onToggleQuest:n,onMarkFailed:r,onSelectQuest:c,selectedQuestId:d}=e,[o,u]=(0,i.useState)("all"),[h,p]=(0,i.useState)("all"),[x,j]=(0,i.useState)("all"),[g,v]=(0,i.useState)(!0),[N,q]=(0,i.useState)("chronological"),[f,b]=(0,i.useState)(""),[y,k]=(0,i.useState)(!1),C=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let w=(0,i.useMemo)(()=>{if(!f.trim())return null;let e=f.toLowerCase(),l=s.filter(s=>s.name.toLowerCase().includes(e)||s.nameRu.toLowerCase().includes(e)),a=new Set;l.forEach(e=>{var l,i;null==(i=e.requirements)||null==(l=i.quests)||l.forEach(e=>{s.find(s=>s.id===e)&&a.add(e)})});let i=new Set;return l.forEach(e=>{var l;null==(l=e.unlocks)||l.forEach(e=>{s.find(s=>s.id===e)&&i.add(e)})}),{directMatches:l,requiredQuests:Array.from(a).map(e=>s.find(s=>s.id===e)).filter(Boolean),unlockedQuests:Array.from(i).map(e=>s.find(s=>s.id===e)).filter(Boolean)}},[s,f]),S=(0,i.useMemo)(()=>{let e=[...s];return"chronological"===N?e.sort((e,s)=>e.order-s.order):"alphabetical"===N?e.sort((e,s)=>e.name.localeCompare(s.name)):"status"===N&&e.sort((e,s)=>{let a=l(e.id),i=l(s.id),n=t(e.id),r=t(s.id);return n&&!r?1:!n&&r?-1:a&&!i?1:!a&&i?-1:e.order-s.order}),"all"!==o&&(e=e.filter(e=>e.type===o)),"all"!==h&&(e=e.filter(e=>e.location===h)),"all"!==x&&(e=e.filter(e=>{switch(x){case"romance":return e.flags.isRomance;case"required":return e.flags.isRequired;case"missable":return e.flags.isMissable;case"critical":return e.flags.isCritical;case"time-sensitive":return e.isTimeSensitive;default:return!0}})),g||(e=e.filter(e=>!l(e.id))),e},[s,o,h,x,g,N,l,t]),z=(0,i.useMemo)(()=>Array.from(new Set(s.map(e=>e.location))),[s]);return(0,a.jsxs)("div",{className:"quest-list",children:[(0,a.jsxs)("div",{className:"quest-list-filters",children:[(0,a.jsx)("div",{className:"filter-row filter-row-search",children:(0,a.jsxs)("div",{className:"search-input-container",children:[(0,a.jsx)("input",{type:"text",className:"filter-search",placeholder:"Поиск квеста...",value:f,onChange:e=>b(e.target.value)}),f&&(0,a.jsx)("button",{className:"search-clear-btn",onClick:()=>b(""),title:"Очистить поиск",children:"\xd7"})]})}),(0,a.jsx)("div",{className:"filter-row filter-row-controls",children:(0,a.jsxs)("div",{className:`filters-dropdown ${y?"open":""}`,ref:C,children:[(0,a.jsx)("button",{className:"filters-toggle-btn",onClick:()=>k(!y),children:"Фильтры"}),y&&(0,a.jsxs)("div",{className:"filters-dropdown-content",children:[(0,a.jsxs)("div",{className:"filter-group",children:[(0,a.jsx)("h4",{className:"filter-group-title",children:"Тип квеста"}),(0,a.jsxs)("div",{className:"radio-group",children:[(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"questType",value:"all",checked:"all"===o,onChange:e=>u(e.target.value)}),(0,a.jsx)("span",{children:"Все квесты"})]}),(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"questType",value:"main",checked:"main"===o,onChange:e=>u(e.target.value)}),(0,a.jsx)("span",{children:"Основные"})]}),(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"questType",value:"side",checked:"side"===o,onChange:e=>u(e.target.value)}),(0,a.jsx)("span",{children:"Побочные"})]})]})]}),(0,a.jsxs)("div",{className:"filter-group",children:[(0,a.jsx)("h4",{className:"filter-group-title",children:"Локация"}),(0,a.jsxs)("div",{className:"radio-group",children:[(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"location",value:"all",checked:"all"===h,onChange:e=>p(e.target.value)}),(0,a.jsx)("span",{children:"Все локации"})]}),z.map(e=>(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"location",value:e,checked:h===e,onChange:e=>p(e.target.value)}),(0,a.jsx)("span",{children:e})]},e))]})]}),(0,a.jsxs)("div",{className:"filter-group",children:[(0,a.jsx)("h4",{className:"filter-group-title",children:"Теги"}),(0,a.jsxs)("div",{className:"radio-group",children:[(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"tagFilter",value:"all",checked:"all"===x,onChange:e=>j(e.target.value)}),(0,a.jsx)("span",{children:"Все теги"})]}),(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"tagFilter",value:"romance",checked:"romance"===x,onChange:e=>j(e.target.value)}),(0,a.jsx)("span",{children:"Романтические"})]}),(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"tagFilter",value:"required",checked:"required"===x,onChange:e=>j(e.target.value)}),(0,a.jsx)("span",{children:"Обязательные"})]}),(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"tagFilter",value:"missable",checked:"missable"===x,onChange:e=>j(e.target.value)}),(0,a.jsx)("span",{children:"Пропускаемые"})]}),(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"tagFilter",value:"critical",checked:"critical"===x,onChange:e=>j(e.target.value)}),(0,a.jsx)("span",{children:"Критичные"})]}),(0,a.jsxs)("label",{className:"radio-option",children:[(0,a.jsx)("input",{type:"radio",name:"tagFilter",value:"time-sensitive",checked:"time-sensitive"===x,onChange:e=>j(e.target.value)}),(0,a.jsx)("span",{children:"Временные"})]})]})]})]})]})}),(0,a.jsx)("div",{className:"filter-row filter-row-sort",children:(0,a.jsxs)("div",{className:"filter-sort-controls",children:[(0,a.jsxs)("select",{className:"filter-select",value:N,onChange:e=>q(e.target.value),children:[(0,a.jsx)("option",{value:"chronological",children:"По хронологии"}),(0,a.jsx)("option",{value:"alphabetical",children:"По алфавиту"}),(0,a.jsx)("option",{value:"status",children:"По статусу"})]}),(0,a.jsxs)("label",{className:"filter-checkbox",children:[(0,a.jsx)("input",{type:"checkbox",checked:g,onChange:e=>v(e.target.checked)}),(0,a.jsx)("span",{className:"dd2-checkbox-mark"}),(0,a.jsx)("span",{className:"filter-checkbox-label",children:"Показывать выполненные"})]})]})})]}),(0,a.jsxs)("div",{className:"quest-list-scroll",children:[(0,a.jsx)("div",{className:"quest-list-header",children:(0,a.jsx)("span",{className:"quest-list-count",children:f?(0,a.jsxs)(a.Fragment,{children:["Найдено: ",(null==w?void 0:w.directMatches.length)||0," прямых совпадений"]}):(0,a.jsxs)(a.Fragment,{children:["Найдено: ",S.length," ","all"!==o?`(${"main"===o?"основных":"побочных"})`:"квестов"]})})}),(0,a.jsx)("div",{className:"quest-list-items",children:f?(0,a.jsxs)(a.Fragment,{children:[w&&w.directMatches.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"search-section-header",children:"Прямые совпадения"}),w.directMatches.map(e=>(0,a.jsx)(m,{quest:e,isCompleted:l(e.id),isFailed:t(e.id),isSelected:d===e.id,onToggle:n,onMarkFailed:r,onSelect:c},e.id))]}),w&&w.requiredQuests.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"search-section-header",children:"Требует"}),w.requiredQuests.filter(e=>e).map(e=>(0,a.jsx)(m,{quest:e,isCompleted:l(e.id),isFailed:t(e.id),isSelected:d===e.id,onToggle:n,onMarkFailed:r,onSelect:c},e.id))]}),w&&w.unlockedQuests.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"search-section-header",children:"Необходим для"}),w.unlockedQuests.filter(e=>e).map(e=>(0,a.jsx)(m,{quest:e,isCompleted:l(e.id),isFailed:t(e.id),isSelected:d===e.id,onToggle:n,onMarkFailed:r,onSelect:c},e.id))]}),!(null==w?void 0:w.directMatches.length)&&!(null==w?void 0:w.requiredQuests.length)&&!(null==w?void 0:w.unlockedQuests.length)&&(0,a.jsxs)("div",{className:"quest-list-empty",children:[(0,a.jsx)("p",{children:"Квесты не найдены"}),(0,a.jsx)("p",{className:"text-muted",children:"Попробуйте изменить поисковый запрос"})]})]}):(0,a.jsx)(a.Fragment,{children:0===S.length?(0,a.jsxs)("div",{className:"quest-list-empty",children:[(0,a.jsx)("p",{children:"Квесты не найдены"}),(0,a.jsx)("p",{className:"text-muted",children:"Попробуйте изменить фильтры"})]}):S.map(e=>(0,a.jsx)(m,{quest:e,isCompleted:l(e.id),isFailed:t(e.id),isSelected:d===e.id,onToggle:n,onMarkFailed:r,onSelect:c},e.id))})})]})]})},h=e=>{var s,l,i,t,n,r,c,o,m,u,h,p,x,j,g,v,N,q;let{quest:f,allQuests:b,isCompleted:y,isFailed:k,onToggle:C,onMarkFailed:w,onSelectQuest:S}=e;if(!f)return(0,a.jsx)("div",{className:"quest-details quest-details-empty",children:(0,a.jsxs)("div",{className:"quest-details-empty-content",children:[(0,a.jsx)("img",{src:"/DD2_title_logo_GL.png",alt:"Dragon's Dogma 2",className:"empty-logo"}),(0,a.jsx)("h2",{children:"Детали квеста"}),(0,a.jsx)("p",{children:"Выберите квест из списка для просмотра подробной информации"})]})});let z=e=>b.find(s=>s.id===e),_=k?"quest-details-failed":y?"quest-details-completed":"";return(0,a.jsx)("div",{className:`quest-details ${_}`,children:(0,a.jsxs)("div",{className:"quest-details-scroll",children:[(0,a.jsxs)("div",{className:"quest-details-header",children:[(0,a.jsxs)("div",{className:"quest-details-title-with-icon",children:[f.flags.isRomance?(0,a.jsx)(d,{type:"romance",size:"large",className:"quest-title-icon"}):(0,a.jsx)(d,{type:f.type,size:"large",className:"quest-title-icon"}),(0,a.jsxs)("div",{className:"quest-title-text",children:[(0,a.jsx)("h1",{className:"quest-details-name",children:f.nameRu}),(0,a.jsx)("h2",{className:"quest-details-name-ru",children:f.name})]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[(0,a.jsx)("button",{className:"quest-details-close",onClick:()=>S(null),title:"Закрыть детали квеста",children:"✕"}),(0,a.jsxs)("div",{className:"quest-details-badges-row",children:[f.flags.isRequired&&(0,a.jsxs)("span",{className:"dd2-badge dd2-badge-blue",children:[(0,a.jsx)(d,{type:"required",size:"small"})," Обязательный"]}),f.flags.isRomance&&(0,a.jsxs)("span",{className:"dd2-badge dd2-badge-pink",children:[(0,a.jsx)(d,{type:"romance",size:"small"})," Романтический"]}),f.flags.isMissable&&(0,a.jsxs)("span",{className:"dd2-badge dd2-badge-orange",children:[(0,a.jsx)(d,{type:"missable",size:"small"})," Пропускаемый"]}),f.flags.isCritical&&(0,a.jsxs)("span",{className:"dd2-badge dd2-badge-red",children:[(0,a.jsx)(d,{type:"critical",size:"small"})," Критичный"]}),y&&(0,a.jsx)("span",{className:"dd2-badge dd2-badge-green",children:"✓ Выполнен"}),k&&(0,a.jsx)("span",{className:"dd2-badge dd2-badge-red",children:"✗ Провален"})]})]})]}),(0,a.jsxs)("div",{className:"quest-details-section",children:[(0,a.jsxs)("h3",{className:"quest-details-section-title",children:[(0,a.jsx)(d,{type:"info",size:"small"})," Информация"]}),(0,a.jsxs)("div",{className:"quest-details-location",children:["Королевство Вермунд"===f.location&&(0,a.jsx)(d,{type:"vermund",size:"small"}),"Королевство Батталь"===f.location&&(0,a.jsx)(d,{type:"battahl",size:"small"}),"Вулканический остров"===f.location&&(0,a.jsx)(d,{type:"volcanic",size:"small"}),"Изнанка мира"===f.location&&(0,a.jsx)(d,{type:"unmoored",size:"small"}),(0,a.jsx)("span",{className:"location-primary",children:f.location}),f.subLocation&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"location-arrow",children:"→"}),(0,a.jsx)("span",{className:"location-sub",children:f.subLocation})]})]}),(0,a.jsx)("p",{className:"quest-details-description",children:f.description}),(0,a.jsxs)("div",{className:"quest-info-row",children:[(0,a.jsxs)("span",{className:"info-label",children:[(0,a.jsx)(d,{type:"target",size:"small"})," Как начать:"]}),(0,a.jsx)("span",{className:"info-value",children:f.howToStart})]}),(null==(s=f.npc)?void 0:s.name)&&(0,a.jsxs)("div",{className:"quest-details-npc",children:[(0,a.jsx)("span",{className:"npc-label",children:"NPC:"}),(0,a.jsx)("span",{className:"npc-name",children:f.npc.name}),f.npc.location&&(0,a.jsxs)("span",{className:"npc-location",children:["(",f.npc.location,")"]})]})]}),((null==(i=f.requirements)||null==(l=i.quests)?void 0:l.length)>0||(null==(t=f.requirements)?void 0:t.level)||(null==(r=f.requirements)||null==(n=r.items)?void 0:n.length)>0)&&(0,a.jsxs)("div",{className:"quest-details-section",children:[(0,a.jsxs)("h3",{className:"quest-details-section-title",children:[(0,a.jsx)(d,{type:"required",size:"small"})," Требования"]}),(null==(o=f.requirements)||null==(c=o.quests)?void 0:c.length)>0&&(0,a.jsxs)("div",{className:"quest-details-requirements",children:[(0,a.jsx)("span",{className:"req-label",children:"Необходимые квесты:"}),(0,a.jsx)("ul",{className:"req-list",children:null==(u=f.requirements)||null==(m=u.quests)?void 0:m.map(e=>{let s=z(e);return(0,a.jsx)("li",{className:"req-list-item",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{type:s.type,size:"small"}),(0,a.jsxs)("span",{children:[s.name," (",s.nameRu,")"]})]}):(0,a.jsx)("span",{children:e})},e)})})]}),(null==(h=f.requirements)?void 0:h.level)&&(0,a.jsxs)("div",{className:"quest-details-requirements",children:[(0,a.jsx)("span",{className:"req-label",children:"Рекомендуемый уровень:"}),(0,a.jsx)("span",{className:"req-value",children:f.requirements.level})]}),(null==(x=f.requirements)||null==(p=x.items)?void 0:p.length)>0&&(0,a.jsxs)("div",{className:"quest-details-requirements",children:[(0,a.jsx)("span",{className:"req-label",children:"Необходимые предметы:"}),(0,a.jsx)("ul",{className:"req-list",children:null==(g=f.requirements)||null==(j=g.items)?void 0:j.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})]}),(0,a.jsxs)("div",{className:"quest-details-row",children:[(0,a.jsxs)("div",{className:"quest-details-section quest-details-section-half",children:[(0,a.jsxs)("h3",{className:"quest-details-section-title",children:[(0,a.jsx)(d,{type:"item",size:"small"})," Награды"]}),(0,a.jsxs)("ul",{className:"quest-rewards-list",children:[f.rewards.gold>0&&(0,a.jsxs)("li",{className:"reward-list-item",children:[(0,a.jsx)(d,{type:"gold",size:"small"}),(0,a.jsxs)("span",{children:[f.rewards.gold.toLocaleString("ru-RU")," золота"]})]}),f.rewards.xp>0&&(0,a.jsxs)("li",{className:"reward-list-item",children:[(0,a.jsx)(d,{type:"xp",size:"small"}),(0,a.jsxs)("span",{children:[f.rewards.xp.toLocaleString("ru-RU")," XP"]})]}),f.rewards.items.length>0&&f.rewards.items.map((e,s)=>(0,a.jsxs)("li",{className:"reward-list-item",children:[(0,a.jsx)(d,{type:"item",size:"small"}),(0,a.jsx)("span",{children:e})]},s)),0===f.rewards.gold&&0===f.rewards.xp&&0===f.rewards.items.length&&(0,a.jsx)("li",{className:"text-muted",children:"Нет наград"})]})]}),(null==(v=f.unlocks)?void 0:v.length)>0&&(0,a.jsxs)("div",{className:"quest-details-section quest-details-section-half",children:[(0,a.jsxs)("h3",{className:"quest-details-section-title",children:[(0,a.jsx)(d,{type:"unlock",size:"small"})," Открывает квесты"]}),(0,a.jsx)("ul",{className:"quest-unlocks-list",children:null==(N=f.unlocks)?void 0:N.map(e=>{let s=z(e);return(0,a.jsx)("li",{className:"unlock-list-item",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{type:s.type,size:"small"}),(0,a.jsxs)("span",{children:[s.name," (",s.nameRu,")"]})]}):(0,a.jsx)("span",{children:e})},e)})})]})]}),(null==(q=f.links)?void 0:q.length)>0&&(0,a.jsxs)("div",{className:"quest-details-section",children:[(0,a.jsxs)("h3",{className:"quest-details-section-title",children:[(0,a.jsx)(d,{type:"link",size:"small"})," Гайды и прохождения"]}),(0,a.jsx)("div",{className:"quest-details-links",children:f.links.map((e,s)=>{var l;return(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"quest-link",children:[(0,a.jsx)("span",{className:"link-source",children:e.source||"Ссылка"}),(0,a.jsxs)("span",{className:"link-lang",children:["(",(null==(l=e.language)?void 0:l.toUpperCase())||"RU",")"]}),(0,a.jsx)("span",{className:"link-icon",children:"↗"})]},s)})})]}),f.notes&&(0,a.jsxs)("div",{className:"quest-details-section quest-details-notes",children:[(0,a.jsxs)("h3",{className:"quest-details-section-title",children:[(0,a.jsx)(d,{type:"note",size:"small"})," Важно"]}),(0,a.jsx)("p",{className:"quest-notes-text",children:f.notes})]}),(0,a.jsxs)("div",{className:"quest-details-controls",children:[(0,a.jsx)("button",{className:"dd2-button quest-details-toggle",onClick:()=>C(f.id),disabled:k,children:y?"Отменить выполнение":"Отметить выполненным"}),(0,a.jsx)("button",{className:"dd2-button quest-details-fail",onClick:()=>w(f.id),children:k?"Отменить провал":"Отметить проваленным"})]})]})})},p="dd2-quest-progress";t.createRoot(document.getElementById("root")).render((0,a.jsx)(i.StrictMode,{children:(0,a.jsx)(()=>{let[e,s]=(0,i.useState)(null),[l,t]=(0,i.useState)(!0),[r,c]=(0,i.useState)(null),[d,m]=(0,i.useState)(null);(0,i.useEffect)(()=>{fetch("/quests.json").then(e=>{if(!e.ok)throw Error("Failed to load quests");return e.json()}).then(e=>{s(e),t(!1)}).catch(e=>{console.error("Error loading quests:",e),c("Не удалось загрузить данные квестов"),t(!1)})},[]);let{getCategoryProgress:x,toggleQuest:j,isQuestCompleted:g,isQuestFailed:v,markQuestFailed:N,resetProgress:q}=function(e){let[s,l]=(0,i.useState)(()=>{let e=localStorage.getItem(p);return e?JSON.parse(e):{}});(0,i.useEffect)(()=>{localStorage.setItem(p,JSON.stringify(s))},[s]);let a=(0,i.useCallback)(e=>{l(s=>{var l;if(!(null==(l=s[e])?void 0:l.completed))return{...s,[e]:{completed:!0,completedAt:new Date().toISOString()}};{let l={...s};return delete l[e],l}})},[]),t=(0,i.useCallback)(e=>{l(s=>({...s,[e]:{completed:!0,completedAt:new Date().toISOString()}}))},[]),n=(0,i.useCallback)(e=>{l(s=>{let l={...s};return delete l[e],l})},[]),r=(0,i.useCallback)(e=>{var l;return(null==(l=s[e])?void 0:l.completed)||!1},[s]),c=(0,i.useCallback)(e=>{var l;return(null==(l=s[e])?void 0:l.failed)||!1},[s]),d=(0,i.useCallback)(e=>{l(s=>{let l=s[e];if(null==l||!l.failed)return{...s,[e]:{completed:!1,failed:!0,completedAt:new Date().toISOString()}};{let l={...s};return delete l[e],l}})},[]),o=(0,i.useCallback)(()=>{l({}),localStorage.removeItem(p)},[]),m=(0,i.useCallback)(e=>{let s=e.length,l=e.filter(e=>r(e.id)).length,a=s>0?Math.round(l/s*100):0;return{total:s,completed:l,percentage:a}},[r]);return{progress:s,toggleQuest:a,completeQuest:t,uncompleteQuest:n,isQuestCompleted:r,isQuestFailed:c,markQuestFailed:d,resetProgress:o,getCategoryProgress:(0,i.useCallback)(()=>{let s=e.filter(e=>"main"===e.type),l=e.filter(e=>"side"===e.type),a=m(s),i=m(l),t=m(e.filter(e=>"Королевство Вермунд"===e.location)),n=m(e.filter(e=>"Королевство Батталь"===e.location)),r=m(e.filter(e=>"Вулканический остров"===e.location));return{main:a,side:i,vermund:t,battahl:n,volcanic:r,unmoored:m(e.filter(e=>"Изнанка мира"===e.location)),total:m(e)}},[e,m])}}((null==e?void 0:e.quests)||[]);if(l)return(0,a.jsxs)("div",{className:"app-loading",children:[(0,a.jsx)("div",{className:"loading-spinner"}),(0,a.jsx)("p",{children:"Загрузка квестов Dragon's Dogma 2..."})]});if(r||!e)return(0,a.jsxs)("div",{className:"app-error",children:[(0,a.jsx)("h2",{children:"Ошибка загрузки"}),(0,a.jsx)("p",{children:r||"Неизвестная ошибка"})]});let f=x();return(0,a.jsxs)("div",{className:"app",children:[(0,a.jsx)(n,{onReset:()=>{window.confirm("Вы уверены, что хотите сбросить весь прогресс?")&&q()}}),(0,a.jsx)(o,{progress:f}),(0,a.jsxs)("div",{className:"app-content",children:[(0,a.jsx)(u,{quests:e.quests,isQuestCompleted:g,isQuestFailed:v,onToggleQuest:j,onMarkFailed:N,onSelectQuest:m,selectedQuestId:d}),(0,a.jsx)(h,{quest:d&&e.quests.find(e=>e.id===d)||null,allQuests:e.quests,isCompleted:!!d&&g(d),isFailed:!!d&&v(d),onToggle:j,onMarkFailed:N,onSelectQuest:m})]})]})},{})}))}},t={};function n(e){var s=t[e];if(void 0!==s)return s.exports;var l=t[e]={exports:{}};return i[e](l,l.exports,n),l.exports}n.m=i,n.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),e=[],n.O=(s,l,a,i)=>{if(l){i=i||0;for(var t=e.length;t>0&&e[t-1][2]>i;t--)e[t]=e[t-1];e[t]=[l,a,i];return}for(var r=1/0,t=0;t<e.length;t++){for(var[l,a,i]=e[t],c=!0,d=0;d<l.length;d++)(!1&i||r>=i)&&Object.keys(n.O).every(e=>n.O[e](l[d]))?l.splice(d--,1):(c=!1,i<r&&(r=i));if(c){e.splice(t--,1);var o=a();void 0!==o&&(s=o)}}return s},s={410:0},n.O.j=e=>0===s[e],l=(e,l)=>{var a,i,[t,r,c]=l,d=0;if(t.some(e=>0!==s[e])){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(c)var o=c(n)}for(e&&e(l);d<t.length;d++)i=t[d],n.o(s,i)&&s[i]&&s[i][0](),s[i]=0;return n.O(o)},(a=self.webpackChunkdd2_quests=self.webpackChunkdd2_quests||[]).forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a));var r=n.O(void 0,["783"],function(){return n(271)});r=n.O(r)})();